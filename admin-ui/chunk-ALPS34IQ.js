import{a as R,b as F}from"./chunk-PO5Q2ATW.js";import{C as S,F as w,c as st,e as ct,pb as W,yb as q}from"./chunk-VTM3PV2E.js";var K=st((j,A)=>{"use strict";(function(d,u){typeof j=="object"&&typeof A=="object"?A.exports=u():typeof define=="function"&&define.amd?define([],u):typeof j=="object"?j.AWN=u():d.AWN=u()})(self,function(){return(()=>{"use strict";var d={d:(n,e)=>{for(var a in e)d.o(e,a)&&!d.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:e[a]})},o:(n,e)=>Object.prototype.hasOwnProperty.call(n,e),r:n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})}},u={};function y(n){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(n)}function L(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function H(n,e){for(var a=0;a<e.length;a++){var t=e[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}d.r(u),d.d(u,{default:()=>at});var $={maxNotifications:10,animationDuration:300,position:"bottom-right",labels:{tip:"Tip",info:"Info",success:"Success",warning:"Attention",alert:"Error",async:"Loading",confirm:"Confirmation required",confirmOk:"OK",confirmCancel:"Cancel"},icons:{tip:"question-circle",info:"info-circle",success:"check-circle",warning:"exclamation-circle",alert:"exclamation-triangle",async:"cog fa-spin",confirm:"exclamation-triangle",prefix:"<i class='fa fas fa-fw fa-",suffix:"'></i>",enabled:!0},replacements:{tip:null,info:null,success:null,warning:null,alert:null,async:null,"async-block":null,modal:null,confirm:null,general:{"<script>":"","<\/script>":""}},messages:{tip:"",info:"",success:"Action has been succeeded",warning:"",alert:"Action has been failed",confirm:"This action can't be undone. Continue?",async:"Please, wait...","async-block":"Loading"},formatError:function(n){if(n.response){if(!n.response.data)return"500 API Server Error";if(n.response.data.errors)return n.response.data.errors.map(function(e){return e.detail}).join("<br>");if(n.response.statusText)return"".concat(n.response.status," ").concat(n.response.statusText,": ").concat(n.response.data)}return n.message?n.message:n},durations:{global:5e3,success:null,info:null,tip:null,warning:null,alert:null},minDurations:{async:1e3,"async-block":1e3}},z=function(){function n(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$;L(this,n),Object.assign(this,this.defaultsDeep(i,t))}var e,a;return e=n,a=[{key:"icon",value:function(t){return this.icons.enabled?"".concat(this.icons.prefix).concat(this.icons[t]).concat(this.icons.suffix):""}},{key:"label",value:function(t){return this.labels[t]}},{key:"duration",value:function(t){var i=this.durations[t];return i===null?this.durations.global:i}},{key:"toSecs",value:function(t){return"".concat(t/1e3,"s")}},{key:"applyReplacements",value:function(t,i){if(!t)return this.messages[i]||"";for(var c=0,s=["general",i];c<s.length;c++){var o=s[c];if(this.replacements[o])for(var r in this.replacements[o])t=t.replace(r,this.replacements[o][r])}return t}},{key:"override",value:function(t){return t?new n(t,this):this}},{key:"defaultsDeep",value:function(t,i){var c={};for(var s in t)i.hasOwnProperty(s)?c[s]=y(t[s])==="object"&&t[s]!==null?this.defaultsDeep(t[s],i[s]):i[s]:c[s]=t[s];return c}}],a&&H(e.prototype,a),n}(),v="awn",p={popup:"".concat(v,"-popup"),toast:"".concat(v,"-toast"),btn:"".concat(v,"-btn"),confirm:"".concat(v,"-confirm")},m={prefix:p.toast,klass:{label:"".concat(p.toast,"-label"),content:"".concat(p.toast,"-content"),icon:"".concat(p.toast,"-icon"),progressBar:"".concat(p.toast,"-progress-bar"),progressBarPause:"".concat(p.toast,"-progress-bar-paused")},ids:{container:"".concat(p.toast,"-container")}},f={prefix:p.popup,klass:{buttons:"".concat(v,"-buttons"),button:p.btn,successBtn:"".concat(p.btn,"-success"),cancelBtn:"".concat(p.btn,"-cancel"),title:"".concat(p.popup,"-title"),body:"".concat(p.popup,"-body"),content:"".concat(p.popup,"-content"),dotAnimation:"".concat(p.popup,"-loading-dots")},ids:{wrapper:"".concat(p.popup,"-wrapper"),confirmOk:"".concat(p.confirm,"-ok"),confirmCancel:"".concat(p.confirm,"-cancel")}},M={klass:{hiding:"".concat(v,"-hiding")},lib:v};function G(n,e){for(var a=0;a<e.length;a++){var t=e[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}var _=function(){function n(t,i,c,s,o){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,n),this.newNode=document.createElement("div"),i&&(this.newNode.id=i),c&&(this.newNode.className=c),s&&(this.newNode.style.cssText=s),this.parent=t,this.options=o}var e,a;return e=n,a=[{key:"beforeInsert",value:function(){}},{key:"afterInsert",value:function(){}},{key:"insert",value:function(){return this.beforeInsert(),this.el=this.parent.appendChild(this.newNode),this.afterInsert(),this}},{key:"replace",value:function(t){var i=this;if(this.getElement())return this.beforeDelete().then(function(){return i.updateType(t.type),i.parent.replaceChild(t.newNode,i.el),i.el=i.getElement(t.newNode),i.afterInsert(),i})}},{key:"beforeDelete",value:function(){var t=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.el,c=0;return this.start&&(c=this.options.minDurations[this.type]+this.start-Date.now())<0&&(c=0),new Promise(function(s){setTimeout(function(){i.classList.add(M.klass.hiding),setTimeout(s,t.options.animationDuration)},c)})}},{key:"delete",value:function(){var t=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.el;return this.getElement(i)?this.beforeDelete(i).then(function(){i.remove(),t.afterDelete()}):null}},{key:"afterDelete",value:function(){}},{key:"getElement",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.el;return t?document.getElementById(t.id):null}},{key:"addEvent",value:function(t,i){this.el.addEventListener(t,i)}},{key:"toggleClass",value:function(t){this.el.classList.toggle(t)}},{key:"updateType",value:function(t){this.type=t,this.duration=this.options.duration(this.type)}}],a&&G(e.prototype,a),n}();function Q(n,e){for(var a=0;a<e.length;a++){var t=e[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}var V=function(){function n(t,i){(function(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")})(this,n),this.callback=t,this.remaining=i,this.resume()}var e,a;return e=n,(a=[{key:"pause",value:function(){this.paused=!0,window.clearTimeout(this.timerId),this.remaining-=new Date-this.start}},{key:"resume",value:function(){var t=this;this.paused=!1,this.start=new Date,window.clearTimeout(this.timerId),this.timerId=window.setTimeout(function(){window.clearTimeout(t.timerId),t.callback()},this.remaining)}},{key:"toggle",value:function(){this.paused?this.resume():this.pause()}}])&&Q(e.prototype,a),n}();function C(n){return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(n)}function X(n,e){for(var a=0;a<e.length;a++){var t=e[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function I(n,e){return I=Object.setPrototypeOf||function(a,t){return a.__proto__=t,a},I(n,e)}function Z(n,e){if(e&&(C(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(n)}function T(n){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},T(n)}var tt=function(n){(function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(r&&r.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),r&&I(o,r)})(s,n);var e,a,t,i,c=(t=s,i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var o,r=T(t);if(i){var l=T(this).constructor;o=Reflect.construct(r,arguments,l)}else o=r.apply(this,arguments);return Z(this,o)});function s(o,r,l,b){var k;return function(x,N){if(!(x instanceof N))throw new TypeError("Cannot call a class as a function")}(this,s),(k=c.call(this,b,"".concat(m.prefix,"-").concat(Math.floor(Date.now()-100*Math.random())),"".concat(m.prefix," ").concat(m.prefix,"-").concat(r),"animation-duration: ".concat(l.toSecs(l.animationDuration),";"),l)).updateType(r),k.setInnerHtml(o),k}return e=s,a=[{key:"setInnerHtml",value:function(o){this.type==="alert"&&o&&(o=this.options.formatError(o)),o=this.options.applyReplacements(o,this.type),this.newNode.innerHTML='<div class="awn-toast-wrapper">'.concat(this.progressBar).concat(this.label,'<div class="').concat(m.klass.content,'">').concat(o,'</div><span class="').concat(m.klass.icon,'">').concat(this.options.icon(this.type),"</span></div>")}},{key:"beforeInsert",value:function(){var o=this;if(this.parent.childElementCount>=this.options.maxNotifications){var r=Array.from(this.parent.getElementsByClassName(m.prefix));this.delete(r.find(function(l){return!o.isDeleted(l)}))}}},{key:"afterInsert",value:function(){var o=this;if(this.type=="async")return this.start=Date.now();if(this.addEvent("click",function(){return o.delete()}),!(this.duration<=0)){this.timer=new V(function(){return o.delete()},this.duration);for(var r=0,l=["mouseenter","mouseleave"];r<l.length;r++){var b=l[r];this.addEvent(b,function(){o.isDeleted()||(o.toggleClass(m.klass.progressBarPause),o.timer.toggle())})}}}},{key:"isDeleted",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.el;return o.classList.contains(M.klass.hiding)}},{key:"progressBar",get:function(){return this.duration<=0||this.type==="async"?"":"<div class='".concat(m.klass.progressBar,`' style="animation-duration:`).concat(this.options.toSecs(this.duration),';"></div>')}},{key:"label",get:function(){return'<b class="'.concat(m.klass.label,'">').concat(this.options.label(this.type),"</b>")}}],a&&X(e.prototype,a),s}(_);function P(n){return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(n)}function et(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function nt(n,e){for(var a=0;a<e.length;a++){var t=e[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function D(n,e){return D=Object.setPrototypeOf||function(a,t){return a.__proto__=t,a},D(n,e)}function ot(n,e){if(e&&(P(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(n)}function O(n){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},O(n)}var U=function(n){(function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(r&&r.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),r&&D(o,r)})(s,n);var e,a,t,i,c=(t=s,i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var o,r=O(t);if(i){var l=O(this).constructor;o=Reflect.construct(r,arguments,l)}else o=r.apply(this,arguments);return ot(this,o)});function s(o){var r,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"modal",b=arguments.length>2?arguments[2]:void 0,k=arguments.length>3?arguments[3]:void 0,x=arguments.length>4?arguments[4]:void 0;et(this,s);var N="animation-duration: ".concat(b.toSecs(b.animationDuration),";");return(r=c.call(this,document.body,f.ids.wrapper,null,N,b))[f.ids.confirmOk]=k,r[f.ids.confirmCancel]=x,r.className="".concat(f.prefix,"-").concat(l),["confirm","async-block","modal"].includes(l)||(l="modal"),r.updateType(l),r.setInnerHtml(o),r.insert(),r}return e=s,(a=[{key:"setInnerHtml",value:function(o){var r=this.options.applyReplacements(o,this.type);switch(this.type){case"confirm":var l=["<button class='".concat(f.klass.button," ").concat(f.klass.successBtn,"'id='").concat(f.ids.confirmOk,"'>").concat(this.options.labels.confirmOk,"</button>")];this[f.ids.confirmCancel]!==!1&&l.push("<button class='".concat(f.klass.button," ").concat(f.klass.cancelBtn,"'id='").concat(f.ids.confirmCancel,"'>").concat(this.options.labels.confirmCancel,"</button>")),r="".concat(this.options.icon(this.type),"<div class='").concat(f.klass.title,"'>").concat(this.options.label(this.type),'</div><div class="').concat(f.klass.content,'">').concat(r,"</div><div class='").concat(f.klass.buttons," ").concat(f.klass.buttons,"-").concat(l.length,"'>").concat(l.join(""),"</div>");break;case"async-block":r="".concat(r,'<div class="').concat(f.klass.dotAnimation,'"></div>')}this.newNode.innerHTML='<div class="'.concat(f.klass.body," ").concat(this.className,'">').concat(r,"</div>")}},{key:"keyupListener",value:function(o){if(this.type==="async-block")return o.preventDefault();switch(o.code){case"Escape":o.preventDefault(),this.delete();case"Tab":if(o.preventDefault(),this.type!=="confirm"||this[f.ids.confirmCancel]===!1)return!0;var r=this.okBtn;o.shiftKey?document.activeElement.id==f.ids.confirmOk&&(r=this.cancelBtn):document.activeElement.id!==f.ids.confirmCancel&&(r=this.cancelBtn),r.focus()}}},{key:"afterInsert",value:function(){var o=this;switch(this.listener=function(r){return o.keyupListener(r)},window.addEventListener("keydown",this.listener),this.type){case"async-block":this.start=Date.now();break;case"confirm":this.okBtn.focus(),this.addEvent("click",function(r){if(r.target.nodeName!=="BUTTON")return!1;o.delete(),o[r.target.id]&&o[r.target.id]()});break;default:document.activeElement.blur(),this.addEvent("click",function(r){r.target.id===o.newNode.id&&o.delete()})}}},{key:"afterDelete",value:function(){window.removeEventListener("keydown",this.listener)}},{key:"okBtn",get:function(){return document.getElementById(f.ids.confirmOk)}},{key:"cancelBtn",get:function(){return document.getElementById(f.ids.confirmCancel)}}])&&nt(e.prototype,a),s}(_);function B(n){return B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(n)}function rt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function it(n,e){for(var a=0;a<e.length;a++){var t=e[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}var at=function(){function n(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};rt(this,n),this.options=new z(t)}var e,a;return e=n,(a=[{key:"tip",value:function(t,i){return this._addToast(t,"tip",i).el}},{key:"info",value:function(t,i){return this._addToast(t,"info",i).el}},{key:"success",value:function(t,i){return this._addToast(t,"success",i).el}},{key:"warning",value:function(t,i){return this._addToast(t,"warning",i).el}},{key:"alert",value:function(t,i){return this._addToast(t,"alert",i).el}},{key:"async",value:function(t,i,c,s,o){var r=this._addToast(s,"async",o);return this._afterAsync(t,i,c,o,r)}},{key:"confirm",value:function(t,i,c,s){return this._addPopup(t,"confirm",s,i,c)}},{key:"asyncBlock",value:function(t,i,c,s,o){var r=this._addPopup(s,"async-block",o);return this._afterAsync(t,i,c,o,r)}},{key:"modal",value:function(t,i,c){return this._addPopup(t,i,c)}},{key:"closeToasts",value:function(){for(var t=this.container;t.firstChild;)t.removeChild(t.firstChild)}},{key:"_addPopup",value:function(t,i,c,s,o){return new U(t,i,this.options.override(c),s,o)}},{key:"_addToast",value:function(t,i,c,s){c=this.options.override(c);var o=new tt(t,i,c,this.container);return s?s instanceof U?s.delete().then(function(){return o.insert()}):s.replace(o):o.insert()}},{key:"_afterAsync",value:function(t,i,c,s,o){return t.then(this._responseHandler(i,"success",s,o),this._responseHandler(c,"alert",s,o))}},{key:"_responseHandler",value:function(t,i,c,s){var o=this;return function(r){switch(B(t)){case"undefined":case"string":var l=i==="alert"?t||r:t;o._addToast(l,i,c,s);break;default:s.delete().then(function(){t&&t(r)})}}}},{key:"_createContainer",value:function(){return new _(document.body,m.ids.container,"awn-".concat(this.options.position)).insert().el}},{key:"container",get:function(){return document.getElementById(m.ids.container)||this._createContainer()}}])&&it(e.prototype,a),n}();return u})()})});var J=ct(K());var g={position:"bottom-right",duration:2e3},h=new J.default(g),E=class d{constructor(){}successToast(u){h.success(u,g)}errorToast(u){h.alert(u,g)}warningToast(u){h.warning(u,g)}infoToast(u){h.info(u,g)}tipToast(u){h.tip(u,g)}asyncToast(u){h.async(Promise.resolve(u))}asyncBlock(u){h.asyncBlock(Promise.resolve(u))}modal(u){h.modal(u)}static \u0275fac=function(y){return new(y||d)};static \u0275prov=S({token:d,factory:d.\u0275fac,providedIn:"root"})};var Y=class d{constructor(u,y,L,H){this.http=u;this.router=y;this.as=L;this.ts=H}login(u){return console.log("Backend URL:",R.url),this.http.post(`${R.url}/login`,u)}isLoggedIn(){return!!this.ts.getToken()}getCurrentUser(){return JSON.parse(localStorage.getItem("user")||"{}")}logout(){this.as.infoToast("You are logged out."),this.cleanUserData(),this.router.navigate(["/login"])}cleanUserData(){localStorage.removeItem("user"),localStorage.removeItem("Token"),localStorage.removeItem("refreshToken"),this.router.navigate(["/"])}static \u0275fac=function(y){return new(y||d)(w(W),w(q),w(E),w(F))};static \u0275prov=S({token:d,factory:d.\u0275fac,providedIn:"root"})};export{E as a,Y as b};
